\section{Appendix}
\label{sec:appendix}

\subsection{\venera System Manual}

\subsection{\venera Jenkins Plugin System Manual}

The Venera Jenkins Plugin maintains a HSQL database of standard test artifacts
and their associated Venera JSON logs. It will eventually be responsible for
Venera result presentation and analysis.

\subsubsection{Source Code}

The full source code is freely available at \cite{heisentestPlugin}.

\subsubsection{Requirements}

To build the project from source, the following tools are required:

\begin{itemize}
  \item Java Development Kit (v.7+) \cite{jdk}
  \item Maven (v.3+) \cite{maven}
\end{itemize}

We recommend using IntelliJ \cite{intellij} or some other Java-centric IDE,
although any editor is fine in theory.

\subsubsection{Running the Project}

From the command line:

\begin{lstlisting}[numbers=none]
mvn hpi:run
\end{lstlisting}

IntelliJ users can create a build configuration with type Maven and working
directory set to the root of the project to execute the same command.

\subsubsection{Common Problems}

When executing mvn hpi:run I get {\lq}java.net.BindException: Address already in
use{\rq}.

Something is using the TCP port (probably a previous instance that failed to
shut down correctly). On Linux, running {\tt lsof -i tcp:\$PORT} will give you
the list of processes using TCP port {\tt\$PORT}, which you can then kill with
{\tt kill \$PID}.


\subsection{Supporting Data}

\subsubsection{Full Dalvik Bytecode Example}
\label{sec:sec:full_dalvik_bytecode_example}

\begin{lstlisting}
#1              : (in Lcom/example/MainActivity;)
  name          : 'anExampleMethod'
  type          : '(Ljava/lang/String;I)Ljava/lang/String;'
  access        : 0x0002 (PRIVATE)
  code          -
  registers     : 4
  ins           : 3
  outs          : 2
  insns size    : 5 16-bit code units
024570:                  |[024570] com.example.MainActivity.anExampleMethod:(Ljava/lang/String;I)Ljava/lang/String;
024580: 7120 8503 3200   |0000: invoke-static {v2, v3}, Lcom/example/MainActivity;.appendIntToString:(Ljava/lang/String;I)Ljava/lang/String; // method@0385
024586: 0c00             |0003: move-result-object v0
024588: 1100             |0004: return-object v0
      catches   : (none)
      positions :
        0x0000 line=22
      locals    :
        0x0000 - 0x0005 reg=1 this Lcom/example/MainActivity;
        0x0000 - 0x0005 reg=2 firstArg Ljava/lang/String;
        0x0000 - 0x0005 reg=3 secondArg I
\end{lstlisting}

\subsection{Project Plan and Interim Report}

\include{Reports/ProjectPlan}
\include{Reports/InterimReport}

\subsection{Code Listing}

This section lists the majority of the source code that makes up the \venera
instrumentation tool. Reading code on paper is not ideal --- we suggest checkout
out the full \venera source code with {\tt git} from
\cite{heisentestInstrumentation} and the Jenkins plugin source code from
\cite{heisentestPlugin}.

\begin{landscape}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/Main.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/utility/DalvikTypeDescriptor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/utility/DalvikOpcodes.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/instrumentation/point/MethodEntryInstrumentationPoint.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/instrumentation/point/InstrumentationPoint.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/instrumentation/point/JumpInstrumentationPoint.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/VeneraApkProcessor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/Descriptors.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/classwriters/LogEventWriter.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/classwriters/HeisentestJsonLoggerClassWriter.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/classwriters/LoggerClassWriter.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/MethodSignature.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/VeneraDexTransformer.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/InstrumentationSpy.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/BaseTestCaseClassInfo.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/VeneraApplicationVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/ComplexInstanceMethodEntryMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/VeneraRegisterAllocatingMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/firstpass/VeneraFirstPassMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/firstpass/VeneraFirstPassClassVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/firstpass/VeneraFirstPassApplicationVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/firstpass/VeneraFirstPassAnnotationVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/test/VeneraLoggingTearDownMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/test/VeneraLoggingInitializationMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/test/VeneraBaseTestCaseClassVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/test/VeneraLoggingSetUpMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/SimpleInstanceMethodEntryMethodVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/transform/dex/visitor/VeneraLoggingClassVisitor.java}
\lstinputlisting{../venera/venera-instrumentation/src/./main/java/com/heisentest/venera/VeneraApkInstrumenter.java}
\end{landscape}
